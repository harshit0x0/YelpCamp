<% layout('layouts/boilerPlate') %>
<link rel="stylesheet" href="/stylesheets/clusterMap.css">
<link href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" rel="stylesheet" />
<link href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" rel="stylesheet" />
<link href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" rel="stylesheet" />

<div id="map"></div>

<h2 class="mt-4 text-center">Browse or search your favourite Campgrounds!</h1>

<div class="container-md d-flex flex-wrap justify-content-evenly p-3">
    <% for(let campground of campgrounds.reverse()){ %>
    <div class="card m-3">
        <% if(campground.images.length){ %>
        <img src="<%=campground.images[0].url%>" style="width: 300px; height: 350px;" class="card-img-top" alt="..." >
        <% }else{  %>
        <img src="" style="width: 300px; height: 350px;" class="card-img-top" alt="...">
        <% }  %>

        <div class="card-body text-center">
            <h5 class="card-title"><%= campground.title %></h5>
            <div class="card-text"><%= campground.location %></div>
            <a href="campgrounds/<%= campground._id %>" class="btn btn-dark mt-2">Details</a>
        </div>
    </div>
    <% } %>
    
</div>

<script>
    const campgroundData = { features: <%- JSON.stringify(campgrounds) %>};
</script>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
<script src="/javascripts/clusterMap.js"></script>